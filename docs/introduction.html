<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 1 Introduction | sits: Data Analysis and Machine Learning on Earth Observation Data Cubes with Satellite Image Time Series</title>
  <meta name="description" content="This book describes the sits package." />
  <meta name="generator" content="bookdown 0.21.4 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 1 Introduction | sits: Data Analysis and Machine Learning on Earth Observation Data Cubes with Satellite Image Time Series" />
  <meta property="og:type" content="book" />
  
  <meta property="og:image" content="/images/cover.png" />
  <meta property="og:description" content="This book describes the sits package." />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 1 Introduction | sits: Data Analysis and Machine Learning on Earth Observation Data Cubes with Satellite Image Time Series" />
  
  <meta name="twitter:description" content="This book describes the sits package." />
  <meta name="twitter:image" content="/images/cover.png" />

<meta name="author" content="Rolf Simoes" />
<meta name="author" content="Gilberto Camara" />
<meta name="author" content="Felipe Souza" />
<meta name="author" content="Lorena Santos" />
<meta name="author" content="Pedro R. Andrade" />
<meta name="author" content="Alexandre Carvalho" />
<meta name="author" content="Karine Ferreira" />
<meta name="author" content="Gilberto Queiroz" />
<meta name="author" content="Victor Maus" />


<meta name="date" content="2021-04-08" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="acknowledgements.html"/>
<link rel="next" href="earth-observation-data-cubes.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/accessible-code-block-0.0.1/empty-anchor.js"></script>


<style type="text/css">
code.sourceCode > span { display: inline-block; line-height: 1.25; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="css/style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">SITS Book</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Preface</a><ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#who-this-book-is-for"><i class="fa fa-check"></i>Who this book is for</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#how-to-use-this-book"><i class="fa fa-check"></i>How to use this book</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#publications-using-sits"><i class="fa fa-check"></i>Publications using sits</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="setup.html"><a href="setup.html"><i class="fa fa-check"></i>Setup</a><ul>
<li class="chapter" data-level="" data-path="setup.html"><a href="setup.html#docker-images"><i class="fa fa-check"></i>Docker images</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="acknowledgements.html"><a href="acknowledgements.html"><i class="fa fa-check"></i>Acknowledgements</a></li>
<li class="part"><span><b>I Overview</b></span></li>
<li class="chapter" data-level="1" data-path="introduction.html"><a href="introduction.html"><i class="fa fa-check"></i><b>1</b> Introduction</a><ul>
<li class="chapter" data-level="1.1" data-path="introduction.html"><a href="introduction.html#workflow-and-api"><i class="fa fa-check"></i><b>1.1</b> Workflow and API</a></li>
<li class="chapter" data-level="1.2" data-path="introduction.html"><a href="introduction.html#handling-data-cubes-in-sits"><i class="fa fa-check"></i><b>1.2</b> Handling Data Cubes in sits</a></li>
<li class="chapter" data-level="1.3" data-path="introduction.html"><a href="introduction.html#handling-satellite-image-time-series-in-sits"><i class="fa fa-check"></i><b>1.3</b> Handling satellite image time series in <strong>sits</strong></a><ul>
<li class="chapter" data-level="1.3.1" data-path="introduction.html"><a href="introduction.html#data-structure"><i class="fa fa-check"></i><b>1.3.1</b> Data structure</a></li>
<li class="chapter" data-level="1.3.2" data-path="introduction.html"><a href="introduction.html#obtaining-time-series-data"><i class="fa fa-check"></i><b>1.3.2</b> Obtaining time series data</a></li>
</ul></li>
<li class="chapter" data-level="1.4" data-path="introduction.html"><a href="introduction.html#sample-quality-control-using-clustering"><i class="fa fa-check"></i><b>1.4</b> Sample quality control using clustering</a></li>
<li class="chapter" data-level="1.5" data-path="introduction.html"><a href="introduction.html#classification-using-machine-learning"><i class="fa fa-check"></i><b>1.5</b> Classification using machine learning</a></li>
<li class="chapter" data-level="1.6" data-path="introduction.html"><a href="introduction.html#cube-classification"><i class="fa fa-check"></i><b>1.6</b> Cube classification</a></li>
<li class="chapter" data-level="1.7" data-path="introduction.html"><a href="introduction.html#smoothing-and-labelling-of-raster-data-after-classification"><i class="fa fa-check"></i><b>1.7</b> Smoothing and Labelling of raster data after classification</a></li>
<li class="chapter" data-level="1.8" data-path="introduction.html"><a href="introduction.html#validation-techniques"><i class="fa fa-check"></i><b>1.8</b> Validation techniques</a></li>
<li class="chapter" data-level="1.9" data-path="introduction.html"><a href="introduction.html#final-remarks"><i class="fa fa-check"></i><b>1.9</b> Final remarks</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="earth-observation-data-cubes.html"><a href="earth-observation-data-cubes.html"><i class="fa fa-check"></i><b>2</b> Earth observation data cubes</a><ul>
<li class="chapter" data-level="2.1" data-path="earth-observation-data-cubes.html"><a href="earth-observation-data-cubes.html#image-data-cubes-as-the-basis-for-big-earth-observation-data-analysis"><i class="fa fa-check"></i><b>2.1</b> Image data cubes as the basis for big Earth observation data analysis</a></li>
<li class="chapter" data-level="2.2" data-path="earth-observation-data-cubes.html"><a href="earth-observation-data-cubes.html#using-stac-to-access-image-collection"><i class="fa fa-check"></i><b>2.2</b> Using STAC to Access Image Collection</a></li>
<li class="chapter" data-level="2.3" data-path="earth-observation-data-cubes.html"><a href="earth-observation-data-cubes.html#accessing-data-cubes-in-amazon-web-services"><i class="fa fa-check"></i><b>2.3</b> Accessing data cubes in Amazon Web Services</a></li>
<li class="chapter" data-level="2.4" data-path="earth-observation-data-cubes.html"><a href="earth-observation-data-cubes.html#accessing-the-brazil-data-cube"><i class="fa fa-check"></i><b>2.4</b> Accessing the Brazil Data Cube</a></li>
<li class="chapter" data-level="2.5" data-path="earth-observation-data-cubes.html"><a href="earth-observation-data-cubes.html#defining-a-data-cube-using-files"><i class="fa fa-check"></i><b>2.5</b> Defining a data cube using files</a></li>
<li class="chapter" data-level="2.6" data-path="earth-observation-data-cubes.html"><a href="earth-observation-data-cubes.html#regularizing-data-cubes"><i class="fa fa-check"></i><b>2.6</b> Regularizing data cubes</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="working-with-time-series.html"><a href="working-with-time-series.html"><i class="fa fa-check"></i><b>3</b> Working with time series</a><ul>
<li class="chapter" data-level="3.1" data-path="working-with-time-series.html"><a href="working-with-time-series.html#data-structures-for-satellite-time-series"><i class="fa fa-check"></i><b>3.1</b> Data structures for satellite time series</a></li>
<li class="chapter" data-level="3.2" data-path="working-with-time-series.html"><a href="working-with-time-series.html#utilities-for-handling-time-series"><i class="fa fa-check"></i><b>3.2</b> Utilities for handling time series</a></li>
<li class="chapter" data-level="3.3" data-path="working-with-time-series.html"><a href="working-with-time-series.html#time-series-visualisation"><i class="fa fa-check"></i><b>3.3</b> Time series visualisation</a></li>
<li class="chapter" data-level="3.4" data-path="working-with-time-series.html"><a href="working-with-time-series.html#obtaining-time-series-data-from-data-cubes"><i class="fa fa-check"></i><b>3.4</b> Obtaining time series data from data cubes</a></li>
<li class="chapter" data-level="3.5" data-path="working-with-time-series.html"><a href="working-with-time-series.html#filtering-techniques-for-time-series"><i class="fa fa-check"></i><b>3.5</b> Filtering techniques for time series</a><ul>
<li class="chapter" data-level="3.5.1" data-path="working-with-time-series.html"><a href="working-with-time-series.html#savitzkygolay-filter"><i class="fa fa-check"></i><b>3.5.1</b> Savitzky–Golay filter</a></li>
<li class="chapter" data-level="3.5.2" data-path="working-with-time-series.html"><a href="working-with-time-series.html#whittaker-filter"><i class="fa fa-check"></i><b>3.5.2</b> Whittaker filter</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>II Clustering</b></span></li>
<li class="chapter" data-level="4" data-path="time-series-clustering-to-improve-the-quality-of-training-samples.html"><a href="time-series-clustering-to-improve-the-quality-of-training-samples.html"><i class="fa fa-check"></i><b>4</b> Time Series Clustering to Improve the Quality of Training Samples</a><ul>
<li class="chapter" data-level="4.1" data-path="time-series-clustering-to-improve-the-quality-of-training-samples.html"><a href="time-series-clustering-to-improve-the-quality-of-training-samples.html#clustering-for-sample-quality-control"><i class="fa fa-check"></i><b>4.1</b> Clustering for sample quality control</a></li>
<li class="chapter" data-level="4.2" data-path="time-series-clustering-to-improve-the-quality-of-training-samples.html"><a href="time-series-clustering-to-improve-the-quality-of-training-samples.html#hierachical-clustering-for-sample-quality-control"><i class="fa fa-check"></i><b>4.2</b> Hierachical clustering for Sample Quality Control</a><ul>
<li class="chapter" data-level="4.2.1" data-path="time-series-clustering-to-improve-the-quality-of-training-samples.html"><a href="time-series-clustering-to-improve-the-quality-of-training-samples.html#creating-a-dendogram"><i class="fa fa-check"></i><b>4.2.1</b> Creating a dendogram</a></li>
<li class="chapter" data-level="4.2.2" data-path="time-series-clustering-to-improve-the-quality-of-training-samples.html"><a href="time-series-clustering-to-improve-the-quality-of-training-samples.html#using-a-dendrogram-to-evaluate-sample-quality"><i class="fa fa-check"></i><b>4.2.2</b> Using a dendrogram to evaluate sample quality</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="time-series-clustering-to-improve-the-quality-of-training-samples.html"><a href="time-series-clustering-to-improve-the-quality-of-training-samples.html#using-self-organizing-maps-for-sample-quality"><i class="fa fa-check"></i><b>4.3</b> Using Self-organizing Maps for Sample Quality</a><ul>
<li class="chapter" data-level="4.3.1" data-path="time-series-clustering-to-improve-the-quality-of-training-samples.html"><a href="time-series-clustering-to-improve-the-quality-of-training-samples.html#introduction-to-self-organizing-maps"><i class="fa fa-check"></i><b>4.3.1</b> Introduction to Self-organizing Maps</a></li>
<li class="chapter" data-level="4.3.2" data-path="time-series-clustering-to-improve-the-quality-of-training-samples.html"><a href="time-series-clustering-to-improve-the-quality-of-training-samples.html#using-som-for-removing-class-noise"><i class="fa fa-check"></i><b>4.3.2</b> Using SOM for removing class noise</a></li>
<li class="chapter" data-level="4.3.3" data-path="time-series-clustering-to-improve-the-quality-of-training-samples.html"><a href="time-series-clustering-to-improve-the-quality-of-training-samples.html#comparing-global-accuracy-of-original-and-clean-samples"><i class="fa fa-check"></i><b>4.3.3</b> Comparing Global Accuracy of Original and Clean Samples</a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="time-series-clustering-to-improve-the-quality-of-training-samples.html"><a href="time-series-clustering-to-improve-the-quality-of-training-samples.html#conclusion"><i class="fa fa-check"></i><b>4.4</b> Conclusion</a></li>
</ul></li>
<li class="part"><span><b>III Classification</b></span></li>
<li class="chapter" data-level="5" data-path="machine-learning-for-data-cubes-using-the-sits-package.html"><a href="machine-learning-for-data-cubes-using-the-sits-package.html"><i class="fa fa-check"></i><b>5</b> Machine Learning for Data Cubes using the SITS package</a><ul>
<li class="chapter" data-level="5.1" data-path="machine-learning-for-data-cubes-using-the-sits-package.html"><a href="machine-learning-for-data-cubes-using-the-sits-package.html#machine-learning-classification"><i class="fa fa-check"></i><b>5.1</b> Machine learning classification</a></li>
<li class="chapter" data-level="5.2" data-path="machine-learning-for-data-cubes-using-the-sits-package.html"><a href="machine-learning-for-data-cubes-using-the-sits-package.html#visualizing-samples"><i class="fa fa-check"></i><b>5.2</b> Visualizing Samples</a></li>
<li class="chapter" data-level="5.3" data-path="machine-learning-for-data-cubes-using-the-sits-package.html"><a href="machine-learning-for-data-cubes-using-the-sits-package.html#common-interface-to-machine-learning-and-deeplearning-models"><i class="fa fa-check"></i><b>5.3</b> Common interface to machine learning and deeplearning models</a></li>
<li class="chapter" data-level="5.4" data-path="machine-learning-for-data-cubes-using-the-sits-package.html"><a href="machine-learning-for-data-cubes-using-the-sits-package.html#random-forests"><i class="fa fa-check"></i><b>5.4</b> Random forests</a></li>
<li class="chapter" data-level="5.5" data-path="machine-learning-for-data-cubes-using-the-sits-package.html"><a href="machine-learning-for-data-cubes-using-the-sits-package.html#support-vector-machines"><i class="fa fa-check"></i><b>5.5</b> Support Vector Machines</a></li>
<li class="chapter" data-level="5.6" data-path="machine-learning-for-data-cubes-using-the-sits-package.html"><a href="machine-learning-for-data-cubes-using-the-sits-package.html#extreme-gradient-boosting"><i class="fa fa-check"></i><b>5.6</b> Extreme Gradient Boosting</a></li>
<li class="chapter" data-level="5.7" data-path="machine-learning-for-data-cubes-using-the-sits-package.html"><a href="machine-learning-for-data-cubes-using-the-sits-package.html#deep-learning-using-multi-layer-perceptrons"><i class="fa fa-check"></i><b>5.7</b> Deep learning using multi-layer perceptrons</a></li>
<li class="chapter" data-level="5.8" data-path="machine-learning-for-data-cubes-using-the-sits-package.html"><a href="machine-learning-for-data-cubes-using-the-sits-package.html#combined-1d-cnn-and-multi-layer-perceptron-networks"><i class="fa fa-check"></i><b>5.8</b> Combined 1D CNN and multi-layer perceptron networks</a></li>
<li class="chapter" data-level="5.9" data-path="machine-learning-for-data-cubes-using-the-sits-package.html"><a href="machine-learning-for-data-cubes-using-the-sits-package.html#lstm-convolutional-networks-for-time-series-classification"><i class="fa fa-check"></i><b>5.9</b> LSTM Convolutional Networks for Time Series Classification</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="classification-of-images-in-data-cubes-using-satellite-image-time-series.html"><a href="classification-of-images-in-data-cubes-using-satellite-image-time-series.html"><i class="fa fa-check"></i><b>6</b> Classification of Images in Data Cubes using Satellite Image Time Series</a><ul>
<li class="chapter" data-level="6.1" data-path="classification-of-images-in-data-cubes-using-satellite-image-time-series.html"><a href="classification-of-images-in-data-cubes-using-satellite-image-time-series.html#image-data-cubes-as-the-basis-for-big-earth-observation-data-analysis-1"><i class="fa fa-check"></i><b>6.1</b> Image data cubes as the basis for big Earth observation data analysis</a></li>
<li class="chapter" data-level="6.2" data-path="classification-of-images-in-data-cubes-using-satellite-image-time-series.html"><a href="classification-of-images-in-data-cubes-using-satellite-image-time-series.html#defining-a-data-cube-using-files-organised-as-raster-bricks"><i class="fa fa-check"></i><b>6.2</b> Defining a data cube using files organised as raster bricks</a></li>
<li class="chapter" data-level="6.3" data-path="classification-of-images-in-data-cubes-using-satellite-image-time-series.html"><a href="classification-of-images-in-data-cubes-using-satellite-image-time-series.html#classification-using-machine-learning-1"><i class="fa fa-check"></i><b>6.3</b> Classification using machine learning</a></li>
<li class="chapter" data-level="6.4" data-path="classification-of-images-in-data-cubes-using-satellite-image-time-series.html"><a href="classification-of-images-in-data-cubes-using-satellite-image-time-series.html#cube-classification-1"><i class="fa fa-check"></i><b>6.4</b> Cube classification</a><ul>
<li class="chapter" data-level="6.4.1" data-path="classification-of-images-in-data-cubes-using-satellite-image-time-series.html"><a href="classification-of-images-in-data-cubes-using-satellite-image-time-series.html#steps-for-cube-classification"><i class="fa fa-check"></i><b>6.4.1</b> Steps for cube classification</a></li>
<li class="chapter" data-level="6.4.2" data-path="classification-of-images-in-data-cubes-using-satellite-image-time-series.html"><a href="classification-of-images-in-data-cubes-using-satellite-image-time-series.html#adjustments-for-improved-performance"><i class="fa fa-check"></i><b>6.4.2</b> Adjustments for improved performance</a></li>
</ul></li>
<li class="chapter" data-level="6.5" data-path="classification-of-images-in-data-cubes-using-satellite-image-time-series.html"><a href="classification-of-images-in-data-cubes-using-satellite-image-time-series.html#final-remarks-1"><i class="fa fa-check"></i><b>6.5</b> Final remarks</a></li>
</ul></li>
<li class="part"><span><b>IV Post classification</b></span></li>
<li class="chapter" data-level="7" data-path="post-classification-smoothing-using-bayesian-techniques-in-sits.html"><a href="post-classification-smoothing-using-bayesian-techniques-in-sits.html"><i class="fa fa-check"></i><b>7</b> Post classification smoothing using Bayesian techniques in SITS</a><ul>
<li class="chapter" data-level="7.1" data-path="post-classification-smoothing-using-bayesian-techniques-in-sits.html"><a href="post-classification-smoothing-using-bayesian-techniques-in-sits.html#introduction-1"><i class="fa fa-check"></i><b>7.1</b> Introduction</a></li>
<li class="chapter" data-level="7.2" data-path="post-classification-smoothing-using-bayesian-techniques-in-sits.html"><a href="post-classification-smoothing-using-bayesian-techniques-in-sits.html#overview-of-bayesian-estimattion"><i class="fa fa-check"></i><b>7.2</b> Overview of Bayesian estimattion</a><ul>
<li class="chapter" data-level="7.2.1" data-path="post-classification-smoothing-using-bayesian-techniques-in-sits.html"><a href="post-classification-smoothing-using-bayesian-techniques-in-sits.html#smmothing-using-bayes-rule"><i class="fa fa-check"></i><b>7.2.1</b> Smmothing using Bayes’ rule</a></li>
</ul></li>
<li class="chapter" data-level="7.3" data-path="post-classification-smoothing-using-bayesian-techniques-in-sits.html"><a href="post-classification-smoothing-using-bayesian-techniques-in-sits.html#use-of-bayesian-smoothing-in-sits"><i class="fa fa-check"></i><b>7.3</b> Use of Bayesian smoothing in SITS</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="validation-and-accuracy-measurements-in-sits.html"><a href="validation-and-accuracy-measurements-in-sits.html"><i class="fa fa-check"></i><b>8</b> Validation and accuracy measurements in SITS</a><ul>
<li class="chapter" data-level="8.1" data-path="validation-and-accuracy-measurements-in-sits.html"><a href="validation-and-accuracy-measurements-in-sits.html#validation-techniques-1"><i class="fa fa-check"></i><b>8.1</b> Validation techniques</a></li>
<li class="chapter" data-level="8.2" data-path="validation-and-accuracy-measurements-in-sits.html"><a href="validation-and-accuracy-measurements-in-sits.html#comparing-different-validation-methods"><i class="fa fa-check"></i><b>8.2</b> Comparing different validation methods</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./"><strong>sits</strong>: Data Analysis and Machine Learning on Earth Observation Data Cubes with Satellite Image Time Series</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="introduction" class="section level1">
<h1><span class="header-section-number">Chapter 1</span> Introduction</h1>
<hr />
<p>This chapter present an overview of sits. For detailed description of the functions, please see the following chapters.</p>
<hr />
<p>Earth observation (EO) satellites provide a common and consistent set of information about the planet’s land and oceans. Recently, most space agencies have adopted open data policies, making unprecedented amounts of satellite data available for research and operational use. This data deluge has brought about a significant challenge: <em>How to design and build technologies that allow the Earth observation community to analyze big data sets?</em></p>
<p>In this book, we present <strong>sits</strong>, an open-source R package for satellite image time series analysis. It provides support on how to use machine learning techniques with image time series. The package supports the complete cycle of data analysis for time series classification, including data acquisition, visualization, filtering, clustering, classification, validation, and post-classification.</p>
<p>Satellite image time series are obtained by taking calibrated and comparable measures of the same location in Earth at different times. These measures can come from a single sensor (e.g., MODIS) or by combining various sensors (e.g., Landsat 8 and Sentinel-2). If acquired by frequent revisits, these data set can capture significant land use changes. As argued by <span class="citation">(Woodcock et al. 2020)</span>, <em>“dense time series analysis is providing new information on the timing of landscape changes, as well as improving the quality and accuracy of information being derived from remote sensing. The result is a paradigm shift away from change detection, typically using two points in time, to monitoring, or an attempt to track change continuously in time.”</em></p>
<div class="figure" style="text-align: center"><span id="fig:unnamed-chunk-5"></span>
<img src="images/time_series_general_view.png" alt="Using time series for land classification (source: Tan et al., 2017)" width="90%" height="90%" />
<p class="caption">
Figure 1.1: Using time series for land classification (source: Tan et al., 2017)
</p>
</div>
<p>Time series of remote sensing data show that land cover can occur not only progressively and gradually, but they may also show discontinuities with abrupt changes <span class="citation">(Lambin, Geist, and Lepers 2003)</span>. Analyses of multiyear time series of land surface attributes, their fine-scale spatial pattern, and their seasonal evolution lead to a broader view of land-cover change. Satellite image time series have already been used in applications such as mapping for detecting forest disturbance <span class="citation">(Kennedy, Yang, and Cohen 2010)</span>, land disturbance <span class="citation">(Zhu et al. 2020)</span>, ecological dynamics <span class="citation">(Pasquarella et al. 2016)</span>, agricultural intensification <span class="citation">(Galford et al. 2008)</span>, and deforestation monitoring <span class="citation">(Arvor et al. 2012)</span>. Algorithms for processing image time series include BFAST for detecting breaks <span class="citation">(Verbesselt et al. 2010)</span>, TIMESAT for extraction phenological attributes <span class="citation">(Jonsson and Eklundh 2004)</span>, CCDC for continuous change detection <span class="citation">(Arévalo et al. 2020)</span>, and methods based on Dynamic Time Warping (DTW) for land use and land cover classification <span class="citation">(Petitjean, Inglada, and Gancarski 2012, @Maus2019)</span>.</p>
<p>Compared with existing tools, sits has distinctive features:</p>
<ol style="list-style-type: decimal">
<li>A consistent API that encapsulates the entire land classification workflow in a few commands.</li>
<li>Integration with data cubes and Earth observation image collections available in cloud services such as AWS and Microsoft.</li>
<li>A single interface for different machine learning and deep learning algorithms.</li>
<li>Internal support for parallel processing, without requiring users to learn how to improve the performance of their scripts.</li>
<li>Support for efficient processing of large areas in a user-transparent way.</li>
<li>Innovative methods for sample quality control and post-processing.</li>
<li>Capacity to run on virtual machines in cloud environments.</li>
</ol>
<p>Designing software to do big Earth observation data analysis requires balancing between flexibility, interoperability, efficiency, and ease of use. The approach taken in <em>sits</em> is different from software such as Google Earth Engine (GEE) <span class="citation">(Gorelick et al. 2017)</span> and Open Data Cube (ODC) <span class="citation">(Lewis et al. 2017)</span>. Similar to GEE, <em>sits</em> provides a compact API. However, GEE is restricted to the Google environment and does not provide direct support for deep learning using image time series. Since <em>sits</em> runs in different cloud providers, users are flexible to choose the working environment that better fits their needs and resources.</p>
<p>As for the ODC, the approach taken by its designers is that of maximum flexibility. ODC provides users with data organized into a python <em>xarray</em> structure. Since ODC does not provide an API to work with xarrays, specialists have to develop their applications by themselves. This choice by ODC designers aims at allowing experts to develop many different types of applications. Such flexibility comes a cost for studies involving large areas that require parallel processing. In these cases, experts have to learn how to parallelize their scripts. By contrast, the <em>sits</em> API focus on providing a simple and powerful environment for land classification. Parellel processing is done internally and is user-transparent. We consider that the combination of user-centered design and interoperability is <em>sits</em> is well suited for experts that want to use satellite data to land-related data analysis.</p>
<div id="workflow-and-api" class="section level2">
<h2><span class="header-section-number">1.1</span> Workflow and API</h2>
<p>The main aim of sits is to support land cover and land change classification of image data cubes using machine learning methods. As such, the basic workflow and API is:</p>
<ol style="list-style-type: decimal">
<li>Create a data cube based on analysis-ready data image collections available in the cloud or local machines using <code>sits_cube</code>.</li>
<li>Provide a description of the training data as a CSV or SHP file.</li>
<li>Obtain the time series for the training samples using <code>sits_get_data</code>.</li>
<li>Validate the samples using <code>sits_kfold_validate</code>.</li>
<li>Improve the quality of the samples using <code>sits_som_map</code> and <code>sits_som_clean_samples</code>.</li>
<li>Train a machine learning model with <code>sits_train</code>.</li>
<li>Classify the data cubes with <code>sits_classify</code>, producing a cube with class probabilities.</li>
<li>Smoothen the probability data to reduce classification noise with <code>sits_smooth</code>.</li>
<li>Label the probability cube with <code>sits_label_classification</code>.</li>
<li>Assess the quality of the classification with <code>sits_accuracy</code>.</li>
</ol>
Figure <a href="introduction.html#fig:workflow">1.2</a> shows a generic vision of the workflow for land classification.
<div class="figure" style="text-align: center"><span id="fig:workflow"></span>
<img src="images/sits_workflow.png" alt="Workflow of using satellite image time series for classification" width="80%" height="80%" />
<p class="caption">
Figure 1.2: Workflow of using satellite image time series for classification
</p>
</div>
<p>Figure <a href="introduction.html#fig:api">1.3</a> shows how the <em>sits</em> API is used to perform the main steps of the workflow. These functions are: (a) <code>sits_cube</code> which creates a cube; (b) <code>sits_get_data</code> which extracts training data from the cube; (c) <code>sits_train</code> that trains a machine learning model; (d) <code>sits_classify</code> which classifies the cube; (e) <code>sits_label_classication</code> that produces the final labelled image. These five functions encapsulate the core of the <em>sits</em> package.</p>
<div class="figure" style="text-align: center"><span id="fig:api"></span>
<img src="images/sits_api.png" alt="Main functions of the SITS API" width="80%" height="80%" />
<p class="caption">
Figure 1.3: Main functions of the SITS API
</p>
</div>
</div>
<div id="handling-data-cubes-in-sits" class="section level2">
<h2><span class="header-section-number">1.2</span> Handling Data Cubes in sits</h2>
<p>Currently, <em>sits</em> supports data cubes available in the following cloud services:</p>
<ol style="list-style-type: decimal">
<li>Sentinel-2/2A level 2A images in Amazon Web Services (AWS);</li>
<li>Collections of Sentinel, Landsat, and CBERS images in the Brazil Data Cube (BDC);</li>
<li>Collections available in Digital Earth Africa;</li>
<li>Data cubes produced by the <a href="https://github.com/appelmar/gdalcubes">gdalcubes package</a>;</li>
<li>Local image collections.</li>
</ol>
<p>The user defines a data cube by selecting a cloud service collection and determining a space-time extent. The code below shows the definition of a data cube using AWS Sentinel-2/2A images to exemplify how it is used. In the example, the user selects the “Sentinel-2 Level 2” collection in the AWS cloud services. The data cube’s geographical area is defined by the tile “20LKP” and the temporal extent by a start and end date. Access to other cloud services works in similar ways (See <a href="https://e-sensing.github.io/sitsbook/earth-observation-data-cubes.html">Chapter 2</a> for more details).</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="introduction.html#cb3-1"></a>s2_cube &lt;-<span class="st"> </span><span class="kw">sits_cube</span>(</span>
<span id="cb3-2"><a href="introduction.html#cb3-2"></a>    <span class="dt">source        =</span> <span class="st">&quot;AWS&quot;</span>,</span>
<span id="cb3-3"><a href="introduction.html#cb3-3"></a>    <span class="dt">name          =</span> <span class="st">&quot;T20LKP_2018_2019&quot;</span>,</span>
<span id="cb3-4"><a href="introduction.html#cb3-4"></a>    <span class="dt">collection    =</span> <span class="st">&quot;sentinel-s2-l2a&quot;</span>,</span>
<span id="cb3-5"><a href="introduction.html#cb3-5"></a>    <span class="dt">bands         =</span> <span class="kw">c</span>(<span class="st">&quot;B08&quot;</span>, <span class="st">&quot;SCL&quot;</span>),</span>
<span id="cb3-6"><a href="introduction.html#cb3-6"></a>    <span class="dt">tiles         =</span> <span class="st">&quot;20LKP&quot;</span>,</span>
<span id="cb3-7"><a href="introduction.html#cb3-7"></a>    <span class="dt">start_date    =</span> <span class="kw">as.Date</span>(<span class="st">&quot;2018-07-18&quot;</span>),</span>
<span id="cb3-8"><a href="introduction.html#cb3-8"></a>    <span class="dt">end_date      =</span> <span class="kw">as.Date</span>(<span class="st">&quot;2018-08-18&quot;</span>),</span>
<span id="cb3-9"><a href="introduction.html#cb3-9"></a>    <span class="dt">s2_resolution =</span> <span class="dv">60</span></span>
<span id="cb3-10"><a href="introduction.html#cb3-10"></a>)</span></code></pre></div>
<p>To define a data cube using plain files, all image files should have the same spatial resolution and same projection and be in the same directory. Each file should contain a single image band and cover single date. Since timeline and band information is deduced from filenames, users should provide parsing information to allow <em>sits</em> to extract the band and the date. As an example, for the file <code>CBERS-4_AWFI_B13_2018-02-02.tif</code>, the parsing info is <code>c("X1", "X2", "band", "date")</code>.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="introduction.html#cb4-1"></a><span class="kw">library</span>(sits)</span>
<span id="cb4-2"><a href="introduction.html#cb4-2"></a><span class="co"># Create a cube based on a stack of CBERS data</span></span>
<span id="cb4-3"><a href="introduction.html#cb4-3"></a>data_dir &lt;-<span class="st"> </span><span class="kw">system.file</span>(<span class="st">&quot;extdata/raster/cbers&quot;</span>, <span class="dt">package =</span> <span class="st">&quot;sits&quot;</span>)</span>
<span id="cb4-4"><a href="introduction.html#cb4-4"></a></span>
<span id="cb4-5"><a href="introduction.html#cb4-5"></a><span class="co"># files are named using the convention </span></span>
<span id="cb4-6"><a href="introduction.html#cb4-6"></a><span class="co"># &quot;CBERS-4_AWFI_B13_2018-02-02.tif&quot;</span></span>
<span id="cb4-7"><a href="introduction.html#cb4-7"></a>cbers_cube &lt;-<span class="st"> </span><span class="kw">sits_cube</span>(</span>
<span id="cb4-8"><a href="introduction.html#cb4-8"></a>      <span class="dt">source =</span> <span class="st">&quot;LOCAL&quot;</span>,</span>
<span id="cb4-9"><a href="introduction.html#cb4-9"></a>      <span class="dt">name =</span> <span class="st">&quot;022024&quot;</span>,</span>
<span id="cb4-10"><a href="introduction.html#cb4-10"></a>      <span class="dt">satellite =</span> <span class="st">&quot;CBERS-4&quot;</span>,</span>
<span id="cb4-11"><a href="introduction.html#cb4-11"></a>      <span class="dt">sensor =</span> <span class="st">&quot;AWFI&quot;</span>,</span>
<span id="cb4-12"><a href="introduction.html#cb4-12"></a>      <span class="dt">data_dir =</span> data_dir,</span>
<span id="cb4-13"><a href="introduction.html#cb4-13"></a>      <span class="dt">parse_info =</span> <span class="kw">c</span>(<span class="st">&quot;X1&quot;</span>, <span class="st">&quot;X2&quot;</span>, <span class="st">&quot;band&quot;</span>, <span class="st">&quot;date&quot;</span>)</span>
<span id="cb4-14"><a href="introduction.html#cb4-14"></a>)</span>
<span id="cb4-15"><a href="introduction.html#cb4-15"></a></span>
<span id="cb4-16"><a href="introduction.html#cb4-16"></a><span class="co"># print the timeline of the cube</span></span>
<span id="cb4-17"><a href="introduction.html#cb4-17"></a><span class="kw">sits_timeline</span>(cbers_cube)</span></code></pre></div>
<pre class="sourceCode"><code>#&gt;  [1] &quot;2018-02-02&quot; &quot;2018-02-18&quot; &quot;2018-03-06&quot; &quot;2018-03-22&quot; &quot;2018-04-07&quot;
#&gt;  [6] &quot;2018-04-23&quot; &quot;2018-05-09&quot; &quot;2018-05-25&quot; &quot;2018-06-10&quot; &quot;2018-06-26&quot;
#&gt; [11] &quot;2018-07-12&quot; &quot;2018-07-28&quot; &quot;2018-08-13&quot; &quot;2018-08-29&quot;</code></pre>
</div>
<div id="handling-satellite-image-time-series-in-sits" class="section level2">
<h2><span class="header-section-number">1.3</span> Handling satellite image time series in <strong>sits</strong></h2>
<div id="data-structure" class="section level3">
<h3><span class="header-section-number">1.3.1</span> Data structure</h3>
<p>Training a machine learning model in <strong>sits</strong> requires a set of time series describing properties in spatio-temporal locations of interest. This set consists of samples provided by experts that take in-situ field observations or recognize land classes using high-resolution images for land use classification.</p>
<p>The package uses a <code>sits tibble</code> to organize time series data with associated spatial information for handling time series. As an example of how the sits tibble works, the following code shows the first three lines of a tibble containing <span class="math inline">\(1,218\)</span> labeled samples of land cover in the Mato Grosso state of Brazil, with four classes: “Forest”, “Cerrado”, “Pasture”, “Soybean-Corn”. Training samples organized as a tibble can be used to training a machine learning model with <code>sits_train</code>.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="introduction.html#cb6-1"></a><span class="co"># data set of samples</span></span>
<span id="cb6-2"><a href="introduction.html#cb6-2"></a><span class="kw">data</span>(<span class="st">&quot;samples_modis_4bands&quot;</span>)</span>
<span id="cb6-3"><a href="introduction.html#cb6-3"></a>samples_modis_4bands[<span class="dv">1</span><span class="op">:</span><span class="dv">3</span>,]</span></code></pre></div>
<pre class="sourceCode"><code>#&gt; # A tibble: 3 x 7
#&gt;   longitude latitude start_date end_date   label   cube    time_series      
#&gt;       &lt;dbl&gt;    &lt;dbl&gt; &lt;date&gt;     &lt;date&gt;     &lt;chr&gt;   &lt;chr&gt;   &lt;list&gt;           
#&gt; 1     -55.2   -10.8  2013-09-14 2014-08-29 Pasture MOD13Q1 &lt;tibble [23 × 5]&gt;
#&gt; 2     -57.8    -9.76 2006-09-14 2007-08-29 Pasture MOD13Q1 &lt;tibble [23 × 5]&gt;
#&gt; 3     -51.9   -13.4  2014-09-14 2015-08-29 Pasture MOD13Q1 &lt;tibble [23 × 5]&gt;</code></pre>
<p>A <code>sits tibble</code> contains data and metadata. The first six columns contain the metadata: spatial and temporal information, the label assigned to the sample, and the data cube from where the data has been extracted. The spatial location is given in longitude and latitude coordinates for the “WGS84” ellipsoid. For example, the first sample has been labeled “Pasture” at location (<span class="math inline">\(-55.1852\)</span>, <span class="math inline">\(-10.8378\)</span>) and is valid for the period (2013-09-14, 2014-08-29). The <code>time_series</code> column contains the actual data.</p>
</div>
<div id="obtaining-time-series-data" class="section level3">
<h3><span class="header-section-number">1.3.2</span> Obtaining time series data</h3>
<p>To get a time series in <em>sits</em>, user should create a data cube and then extract one or more time series from the cube using <code>sits_get_data()</code>. Users should provide a CSV or SHP file that includes latitude and longitude of the desired location, bands, and start date and end date of the time series.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="introduction.html#cb8-1"></a><span class="kw">library</span>(sits)</span>
<span id="cb8-2"><a href="introduction.html#cb8-2"></a>data_dir &lt;-<span class="st"> </span><span class="kw">system.file</span>(<span class="st">&quot;extdata/raster/mod13q1&quot;</span>, <span class="dt">package =</span> <span class="st">&quot;sits&quot;</span>)</span>
<span id="cb8-3"><a href="introduction.html#cb8-3"></a>modis_cube &lt;-<span class="st"> </span><span class="kw">sits_cube</span>(</span>
<span id="cb8-4"><a href="introduction.html#cb8-4"></a>    <span class="dt">source =</span> <span class="st">&quot;LOCAL&quot;</span>,</span>
<span id="cb8-5"><a href="introduction.html#cb8-5"></a>    <span class="dt">name =</span> <span class="st">&quot;sinop-2014&quot;</span>,</span>
<span id="cb8-6"><a href="introduction.html#cb8-6"></a>    <span class="dt">satellite =</span> <span class="st">&quot;TERRA&quot;</span>,</span>
<span id="cb8-7"><a href="introduction.html#cb8-7"></a>    <span class="dt">sensor =</span> <span class="st">&quot;MODIS&quot;</span>,</span>
<span id="cb8-8"><a href="introduction.html#cb8-8"></a>    <span class="dt">data_dir =</span> data_dir,</span>
<span id="cb8-9"><a href="introduction.html#cb8-9"></a>    <span class="dt">delim =</span> <span class="st">&quot;_&quot;</span>,</span>
<span id="cb8-10"><a href="introduction.html#cb8-10"></a>    <span class="dt">parse_info =</span> <span class="kw">c</span>(<span class="st">&quot;X1&quot;</span>, <span class="st">&quot;X2&quot;</span>, <span class="st">&quot;band&quot;</span>, <span class="st">&quot;date&quot;</span>)</span>
<span id="cb8-11"><a href="introduction.html#cb8-11"></a>)</span>
<span id="cb8-12"><a href="introduction.html#cb8-12"></a><span class="co"># obtain a set of locations defined by a CSV file</span></span>
<span id="cb8-13"><a href="introduction.html#cb8-13"></a>csv_raster_file &lt;-<span class="st"> </span><span class="kw">system.file</span>(<span class="st">&quot;extdata/samples/samples_sinop_crop.csv&quot;</span>,</span>
<span id="cb8-14"><a href="introduction.html#cb8-14"></a>                               <span class="dt">package =</span> <span class="st">&quot;sits&quot;</span>)</span>
<span id="cb8-15"><a href="introduction.html#cb8-15"></a><span class="co"># retrieve the points from the data cube</span></span>
<span id="cb8-16"><a href="introduction.html#cb8-16"></a>points &lt;-<span class="st"> </span><span class="kw">sits_get_data</span>(modis_cube, <span class="dt">file =</span> csv_raster_file)</span></code></pre></div>
<pre><code>#&gt; All points have been retrieved</code></pre>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="introduction.html#cb10-1"></a><span class="co"># plot the first point</span></span>
<span id="cb10-2"><a href="introduction.html#cb10-2"></a><span class="kw">plot</span>(points[<span class="dv">1</span>,])</span></code></pre></div>
<div class="figure" style="text-align: center"><span id="fig:unnamed-chunk-9"></span>
<img src="sitsbook_files/figure-html/unnamed-chunk-9-1.png" alt="A one year time series of MOD13Q1 data for bands NDVI and EVI" width="70%" />
<p class="caption">
Figure 1.4: A one year time series of MOD13Q1 data for bands NDVI and EVI
</p>
</div>
</div>
</div>
<div id="sample-quality-control-using-clustering" class="section level2">
<h2><span class="header-section-number">1.4</span> Sample quality control using clustering</h2>
<p>One of the key challenges of machine learning is improving the quality of the training samples. Good samples lead to good classification maps. It is recommended that users apply pre-processing methods to identify samples that might have been wrongly labeled or have low discriminatory power. <em>sits</em> provides support for two clustering methods to evaluate sample quality: (a) Agglomerative Hierarchical Clustering (AHC); (b) Self-organizing Maps (SOM). Full details of the clustering methods are available in <a href="https://e-sensing.github.io/sitsbook/time-series-clustering-to-improve-the-quality-of-training-samples.html">Chapter 4</a>.</p>
</div>
<div id="classification-using-machine-learning" class="section level2">
<h2><span class="header-section-number">1.5</span> Classification using machine learning</h2>
<p>The package provides functionality to explore the full depth of satellite image time series data, treating time series as a feature vector. It uses as many temporal attributes as possible, increasing the classification space’s dimension. The <code>sits_train</code> function provides a common interface to all machine learning (ML) models, with two parameters: the input samples and the ML method (<code>ml_method</code>). After the model is estimated, users can classify individual time series or full data cubes with <code>sits_classify</code>. In the example below, we train a ML model to classify a MODIS time series (described above). The classification results can be shown in text format using <code>sits_show_prediction</code> or graphically <code>plot</code>.</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="introduction.html#cb11-1"></a><span class="co">#select the data for classification</span></span>
<span id="cb11-2"><a href="introduction.html#cb11-2"></a><span class="co"># Train a machine learning model using Random Forest</span></span>
<span id="cb11-3"><a href="introduction.html#cb11-3"></a>rfor_model &lt;-<span class="st"> </span><span class="kw">sits_train</span>(<span class="dt">data =</span> samples_modis_4bands, </span>
<span id="cb11-4"><a href="introduction.html#cb11-4"></a>                    <span class="dt">ml_method =</span> <span class="kw">sits_rfor</span>(<span class="dt">num_trees =</span> <span class="dv">1000</span>))</span>
<span id="cb11-5"><a href="introduction.html#cb11-5"></a><span class="co"># get a point to be classified (select 4 bands to match the model)</span></span>
<span id="cb11-6"><a href="introduction.html#cb11-6"></a>point_4bands &lt;-<span class="st"> </span><span class="kw">sits_select</span>(point_mt_6bands, </span>
<span id="cb11-7"><a href="introduction.html#cb11-7"></a>                            <span class="dt">bands =</span> <span class="kw">c</span>(<span class="st">&quot;NDVI&quot;</span>, <span class="st">&quot;EVI&quot;</span>, <span class="st">&quot;NIR&quot;</span>, <span class="st">&quot;MIR&quot;</span>))</span>
<span id="cb11-8"><a href="introduction.html#cb11-8"></a><span class="co"># Classify using random forest model</span></span>
<span id="cb11-9"><a href="introduction.html#cb11-9"></a>class &lt;-<span class="st"> </span><span class="kw">sits_classify</span>(point_4bands, rfor_model)</span>
<span id="cb11-10"><a href="introduction.html#cb11-10"></a><span class="co"># plot the results of the prediction</span></span>
<span id="cb11-11"><a href="introduction.html#cb11-11"></a><span class="kw">plot</span>(class)</span></code></pre></div>
<div class="figure" style="text-align: center"><span id="fig:unnamed-chunk-10"></span>
<img src="sitsbook_files/figure-html/unnamed-chunk-10-1.png" alt="Random forest classification of a $16$ years time series. The location (latitude, longitude) shown at the top of the graph is in geographic coordinate system (WGS84 {\it datum})." width="70%" />
<p class="caption">
Figure 1.5: Random forest classification of a <span class="math inline">\(16\)</span> years time series. The location (latitude, longitude) shown at the top of the graph is in geographic coordinate system (WGS84 {}).
</p>
</div>
<p>The following machine learning methods are available:</p>
<ul>
<li>Linear discriminant analysis (<code>sits_lda</code>)</li>
<li>Quadratic discriminant analysis (<code>sits_qda</code>)</li>
<li>Multinomial logit and its variants ‘lasso’ and ‘ridge’ (<code>sits_mlr</code>)</li>
<li>Support vector machines (<code>sits_svm</code>)</li>
<li>Random forests (<code>sits_rfor</code>)</li>
<li>Extreme gradient boosting (<code>sits_xgboost</code>)</li>
<li>Deep learning (DL) using multi-layer perceptrons (<code>sits_deeplearning</code>)</li>
<li>DL with 1D convolutional neural networks (<code>sits_CNN</code>),</li>
<li>DL combining 1D CNN and multi-layer perceptron networks (<code>sits_tempCNN</code>)</li>
<li>DL using 1D version of ResNet (<code>sits_ResNet</code>).</li>
<li>DL using a combination of long-short term memory (LSTM) and 1D CNN (<code>sits_LSTM_FCN</code>)</li>
</ul>
<p>For more details, please see <a href="https://e-sensing.github.io/sitsbook/machine-learning-for-data-cubes-using-the-sits-package.html">Chapter 5</a>.</p>
</div>
<div id="cube-classification" class="section level2">
<h2><span class="header-section-number">1.6</span> Cube classification</h2>
<p>Given a data cube and a trained ML model, the function <code>sits_classify()</code> assigns class probability to each time series. To optimize processing time, users can adjust the function according to the server’s capabilities, configuring the available memory (<code>memsize</code>) and the number of cores to be used (<code>multicores</code>).</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="introduction.html#cb12-1"></a><span class="co"># create a data cube to be classified</span></span>
<span id="cb12-2"><a href="introduction.html#cb12-2"></a><span class="co"># composed of MOD13Q1 images from the Sinop region in Mato Grosso (Brazil)</span></span>
<span id="cb12-3"><a href="introduction.html#cb12-3"></a>data_dir &lt;-<span class="st"> </span><span class="kw">system.file</span>(<span class="st">&quot;extdata/raster/mod13q1&quot;</span>, <span class="dt">package =</span> <span class="st">&quot;sits&quot;</span>)</span>
<span id="cb12-4"><a href="introduction.html#cb12-4"></a>sinop &lt;-<span class="st"> </span><span class="kw">sits_cube</span>(</span>
<span id="cb12-5"><a href="introduction.html#cb12-5"></a>    <span class="dt">source =</span> <span class="st">&quot;LOCAL&quot;</span>,</span>
<span id="cb12-6"><a href="introduction.html#cb12-6"></a>    <span class="dt">name =</span> <span class="st">&quot;sinop-2014&quot;</span>,</span>
<span id="cb12-7"><a href="introduction.html#cb12-7"></a>    <span class="dt">satellite =</span> <span class="st">&quot;TERRA&quot;</span>,</span>
<span id="cb12-8"><a href="introduction.html#cb12-8"></a>    <span class="dt">sensor =</span> <span class="st">&quot;MODIS&quot;</span>,</span>
<span id="cb12-9"><a href="introduction.html#cb12-9"></a>    <span class="dt">data_dir =</span> data_dir,</span>
<span id="cb12-10"><a href="introduction.html#cb12-10"></a>    <span class="dt">parse_info =</span> <span class="kw">c</span>(<span class="st">&quot;X1&quot;</span>, <span class="st">&quot;X2&quot;</span>, <span class="st">&quot;band&quot;</span>, <span class="st">&quot;date&quot;</span>)</span>
<span id="cb12-11"><a href="introduction.html#cb12-11"></a>)</span>
<span id="cb12-12"><a href="introduction.html#cb12-12"></a></span>
<span id="cb12-13"><a href="introduction.html#cb12-13"></a><span class="co"># Retrieve the set of samples for the Mato Grosso region </span></span>
<span id="cb12-14"><a href="introduction.html#cb12-14"></a><span class="co"># these samples have already been quality controlled </span></span>
<span id="cb12-15"><a href="introduction.html#cb12-15"></a>samples_2bands  &lt;-<span class="st"> </span><span class="kw">sits_select</span>(samples_modis_4bands, </span>
<span id="cb12-16"><a href="introduction.html#cb12-16"></a>                               <span class="dt">bands =</span> <span class="kw">c</span>(<span class="st">&quot;NDVI&quot;</span>, <span class="st">&quot;EVI&quot;</span>))</span>
<span id="cb12-17"><a href="introduction.html#cb12-17"></a><span class="co"># build a machine learning model for this area</span></span>
<span id="cb12-18"><a href="introduction.html#cb12-18"></a>svm_model &lt;-<span class="st"> </span><span class="kw">sits_train</span>(<span class="dt">data =</span> samples_2bands, <span class="dt">ml_method =</span> <span class="kw">sits_svm</span>())</span>
<span id="cb12-19"><a href="introduction.html#cb12-19"></a></span>
<span id="cb12-20"><a href="introduction.html#cb12-20"></a><span class="co"># Classify the raster cube, generating a probability file</span></span>
<span id="cb12-21"><a href="introduction.html#cb12-21"></a>probs_cube &lt;-<span class="st"> </span><span class="kw">sits_classify</span>(sinop, </span>
<span id="cb12-22"><a href="introduction.html#cb12-22"></a>                            <span class="dt">ml_model =</span> svm_model, </span>
<span id="cb12-23"><a href="introduction.html#cb12-23"></a>                            <span class="dt">output_dir =</span> <span class="kw">tempdir</span>(),</span>
<span id="cb12-24"><a href="introduction.html#cb12-24"></a>                            <span class="dt">memsize =</span> <span class="dv">16</span>,</span>
<span id="cb12-25"><a href="introduction.html#cb12-25"></a>                            <span class="dt">multicores =</span> <span class="dv">4</span>,</span>
<span id="cb12-26"><a href="introduction.html#cb12-26"></a>                            <span class="dt">verbose =</span> <span class="ot">FALSE</span>)</span>
<span id="cb12-27"><a href="introduction.html#cb12-27"></a><span class="co"># plot the probabilities cube</span></span>
<span id="cb12-28"><a href="introduction.html#cb12-28"></a><span class="kw">plot</span>(probs_cube)</span></code></pre></div>
<div class="figure" style="text-align: center"><span id="fig:unnamed-chunk-11"></span>
<img src="sitsbook_files/figure-html/unnamed-chunk-11-1.png" alt="Class probabilities for each pixel" width="70%" />
<p class="caption">
Figure 1.6: Class probabilities for each pixel
</p>
</div>
<p>When applied to a data cube, <code>sits_classify</code> produces one probability image for each land class. These images are grouped in a probability cube. The value of each pixel of each class is proportional to the class probability estimated by the machine learning classifier, as shown in the Figure above.</p>
</div>
<div id="smoothing-and-labelling-of-raster-data-after-classification" class="section level2">
<h2><span class="header-section-number">1.7</span> Smoothing and Labelling of raster data after classification</h2>
<p>Post-processing is a desirable step in any classification process. Most statistical classifiers use training samples derived from single pixels. However, images contain many mixed pixels irrespective of the resolution. Also, there is a considerable degree of data variability in each class. Smoothing methods available in <code>sits_smooth</code> use the neighborhood information to remove outliers and enhance consistency in the resulting product. By default, this function selects the most likely class for each pixel using a Bayesian estimator that considers the neighbors. Alternatives are gaussian and bilinear smoothing. The resulting cube can be labeled using <code>sits_label_classification</code>. This function select the most likely class in each pixel and assigns it to the final classified image.</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="introduction.html#cb13-1"></a><span class="co"># smooth the result with a bayesian filter</span></span>
<span id="cb13-2"><a href="introduction.html#cb13-2"></a>sinop_bayes &lt;-<span class="st"> </span><span class="kw">sits_smooth</span>(probs_cube, <span class="dt">output_dir =</span> <span class="kw">tempdir</span>())</span>
<span id="cb13-3"><a href="introduction.html#cb13-3"></a><span class="co"># label the resulting image</span></span>
<span id="cb13-4"><a href="introduction.html#cb13-4"></a>label_bayes &lt;-<span class="st"> </span><span class="kw">sits_label_classification</span>(sinop_bayes, <span class="dt">output_dir =</span> <span class="kw">tempdir</span>())</span>
<span id="cb13-5"><a href="introduction.html#cb13-5"></a><span class="co"># plot the result</span></span>
<span id="cb13-6"><a href="introduction.html#cb13-6"></a><span class="kw">plot</span>(label_bayes)</span></code></pre></div>
<div class="figure" style="text-align: center"><span id="fig:unnamed-chunk-12"></span>
<img src="sitsbook_files/figure-html/unnamed-chunk-12-1.png" alt="Classified image post-processed with Bayesian smoothing" width="90%" height="90%" />
<p class="caption">
Figure 1.7: Classified image post-processed with Bayesian smoothing
</p>
</div>
</div>
<div id="validation-techniques" class="section level2">
<h2><span class="header-section-number">1.8</span> Validation techniques</h2>
<p>Validation is a process undertaken on models to estimate their prediction errors. <strong>sits</strong> supports the <em>k-fold cross-validation</em> approach, probably the most used validation technique <span class="citation">(Hastie, Tibshirani, and J 2009)</span> using the function <code>sits_kfold_validate</code>. The following code performs a five-fold validation using the SVM classification model as a default classifier. By default, <code>sits_kfold_validate</code> provides the overall accuracy metrics. The detailed metrics</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="introduction.html#cb14-1"></a><span class="co"># perform a five fold validation for the &quot;cerrado_2classes&quot; data set</span></span>
<span id="cb14-2"><a href="introduction.html#cb14-2"></a><span class="co"># Random Forest machine learning method using default parameters</span></span>
<span id="cb14-3"><a href="introduction.html#cb14-3"></a>acc &lt;-<span class="st"> </span><span class="kw">sits_kfold_validate</span>(cerrado_2classes, </span>
<span id="cb14-4"><a href="introduction.html#cb14-4"></a>                           <span class="dt">folds =</span> <span class="dv">5</span>, </span>
<span id="cb14-5"><a href="introduction.html#cb14-5"></a>                           <span class="dt">ml_method =</span> <span class="kw">sits_rfor</span>(<span class="dt">num_trees =</span> <span class="dv">1000</span>))</span></code></pre></div>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="introduction.html#cb15-1"></a><span class="co"># print detailed validation metrics (not shown here to reduce space)</span></span>
<span id="cb15-2"><a href="introduction.html#cb15-2"></a><span class="kw">sits_accuracy_summary</span>(acc)</span></code></pre></div>
<p>More details about validation are available in <a href="https://e-sensing.github.io/sitsbook/validation-and-accuracy-measurements-in-sits.html">Chapter 8</a></p>
</div>
<div id="final-remarks" class="section level2">
<h2><span class="header-section-number">1.9</span> Final remarks</h2>
<p>The <strong>sits</strong> package provides an API to build EO data cubes from image collections available in cloud services, and to perform land classification of data cubes using machine learning. The classification models are built based on satellite image time series extracted from the cubes. The package provides additional function for sample quality control, post-processing and validation. The design of the API tries to reduce complexity for users and hide details such as how to do parallel processing, and to handle data cubes composed by tiles of different timelines.</p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="acknowledgements.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="earth-observation-data-cubes.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["sitsbook.pdf"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
